<div class="dashboard-page container py-4">

  <div class="row g-3 mb-4 text-center">
    <div class="col-6 col-sm-6 col-md-3" *ngFor="let card of summaryCards">
      <div class="card shadow-sm border-0 rounded-3 h-100 status-card">
        <div class="card-body d-flex flex-column justify-content-center align-items-center" [ngClass]="card.textClass">
          <h6 class="fw-semibold mb-2">{{ card.title }}</h6>
          <h2 class="fw-bold">{{ card.count }}</h2>
        </div>
      </div>
    </div>
  </div>


  <div class="row g-3 mb-4">
    <div class="col-12 col-md-6">
      <label for="employeeFilter" class="form-label fw-semibold">Filter by Employee</label>
      <select id="employeeFilter" class="form-select shadow-sm" [(ngModel)]="selectedEmployee" (change)="filterTasks()">
        <option value="">All Employees</option>
        <option *ngFor="let emp of employees" [value]="emp.employeeID">{{ emp.name }}</option>
      </select>
    </div>

    <div class="col-12 col-md-6">
      <label for="statusFilter" class="form-label fw-semibold">Filter by Status</label>
      <select id="statusFilter" class="form-select shadow-sm" [(ngModel)]="selectedStatus" (change)="filterTasks()">
        <option value="">All Status</option>
        <option value="Pending">Pending</option>
        <option value="In Progress">In Progress</option>
        <option value="On Hold">On Hold</option>
        <option value="Completed">Completed</option>
      </select>
    </div>
  </div>


  <div class="card shadow-sm border-0 rounded-3">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-dark">
            <tr>
              <th>Sl.No</th>
              <th>Title</th>
              <th>Task ID</th>
              <th>Description</th>
              <th>Assigned To</th>
              <th>Status</th>
              <th>Due Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of filteredTasks; let i = index">
              <td>{{ i + 1 }}</td>
              <td class="fw-semibold">{{ task.title }}</td>
              <td>{{ task.taskID }}</td>
              <td>{{ task.description }}</td>
              <td>{{ getEmployeeName(task.assignedTo_EmployeeId) }}</td>
              <td>
                <span class="badge rounded-pill px-3 py-2 text-white" [ngClass]="{
                        'bg-warning': task.taskStatus === 'Pending',
                        'bg-primary': task.taskStatus === 'In Progress',
                        'bg-secondary': task.taskStatus === 'On Hold',
                        'bg-success': task.taskStatus === 'Completed'
                      }">
                  {{ task.taskStatus }}
                </span>
              </td>
              <td>{{ task.dueDate | date:'yyyy-MM-dd' }}</td>
            </tr>
            <tr *ngIf="filteredTasks.length === 0">
              <td colspan="7" class="text-center text-muted">No tasks found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>